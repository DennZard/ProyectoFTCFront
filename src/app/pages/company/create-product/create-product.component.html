<div class="page-wrapper animate__animated animate__fadeIn animate__faster">
  <p-card class="producto-card">
    <div class="producto-container">
      <div class="producto-img-section">
        <form [formGroup]="productForm">
          <img
          pInputText
          placeholder="Image"
          formControlName="image"
            [src]="
              displayedImage || 'assets/placeholder.png'
            "
            alt="No se puede cargar la imagen"
            class="producto-img"
          />
          <input
            type="text"
            pInputText
            placeholder="URL de la imagen"
            formControlName="image"
            (input)="updateImage($event)"
          />
        </form>
      </div>

      <div class="producto-form-section">
        <form [formGroup]="productForm">
          <div class="form-columns">
            <div class="form-group">
              <span class="p-inputgroup-addon"
                ><i class="pi pi-tag"> Nombre</i></span
              >
              <input
                type="text"
                pInputText
                placeholder="Nombre"
                formControlName="name"
              />
              <p *ngIf="isValidField('name')">Campo requerido</p>

              <span class="p-inputgroup-addon"
                ><i class="pi pi-euro"> Precio</i></span
              >
              <input
                type="number"
                pInputText
                placeholder="Precio"
                formControlName="price"
              />
              <p *ngIf="isValidField('price')">El precio no puede ser menor que 0</p>

              <span class="p-inputgroup-addon"
                ><i class="pi pi-box"> Stock</i></span
              >
              <input
                type="number"
                pInputText
                placeholder="Stock"
                formControlName="stock"
              />
              <small *ngIf="productForm.get('stock')?.errors?.['notInteger']">El stock debe ser un número entero.</small>
              <p *ngIf="isValidField('stock')">El stock no puede ser menor que  0</p>
            </div>

            <div class="form-group">
              <p-dropdown
                [options]="categorias"
                formControlName="category"
                placeholder="Categoría"
                optionLabel="name"
              ></p-dropdown>
              <p *ngIf="isValidField('categoryId')">El producto tiene que ser de una categoria</p>
            </div>
          </div>
        </form>

        <div class="btn-form">
          <button
            [disabled]="!productForm.valid"
            pButton
            type="button"
            label="Guardar producto"
            class="p-button-success"
            (click)="saveProduct()"
          ></button>
        </div>
      </div>
    </div>
  </p-card>

  <a routerLink="/main/compania/productos" class="back-button">
     Volver
  </a>
</div>
